##### Copy-Mode #####
# Entering and Exiting Copy Mode (Vi)
bind [ copy-mode
bind -T copy-mode-vi Escape         send -X cancel
bind -T copy-mode    Escape         send -X cancel
bind -T copy-mode-vi q              send -X cancel
bind -T copy-mode    C-c            send -X cancel
bind -T copy-mode-vi C-c            send -X cancel

# Movement and Navigation
# bind -T copy-mode-vi h              send -X top-line
bind -T copy-mode-vi h              send -X cursor-left
bind -T copy-mode-vi j              send -X scroll-down
bind -T copy-mode-vi k              send -X scroll-up
# bind -T copy-mode-vi l              send -X bottom-line
bind -T copy-mode-vi l              send -X cursor-right
bind -T copy-mode-vi C-Up           send -X scroll-up
bind -T copy-mode-vi C-Down         send -X scroll-down

bind -T copy-mode-vi H              send -X cursor-left
bind -T copy-mode-vi J              send -X cursor-down
bind -T copy-mode-vi K              send -X cursor-up
bind -T copy-mode-vi L              send -X cursor-right
bind -T copy-mode-vi Up             send -X cursor-up
bind -T copy-mode-vi Down           send -X cursor-down
bind -T copy-mode-vi Left           send -X cursor-left
bind -T copy-mode-vi Right          send -X cursor-right

bind -T copy-mode-vi w              send -X next-word
bind -T copy-mode-vi e              send -X next-word-end
bind -T copy-mode-vi b              send -X previous-word
bind -T copy-mode-vi W              send -X next-space
bind -T copy-mode-vi E              send -X next-space-end
bind -T copy-mode-vi B              send -X previous-space

bind -T copy-mode-vi g              send -X history-top
bind -T copy-mode-vi G              send -X history-bottom
bind -T copy-mode-vi 0              send -X start-of-line
bind -T copy-mode-vi \$             send -X end-of-line

# Repeat System for Vim Motions
bind -T copy-mode-vi 1              command-prompt -N -I 1 -p (repeat) { send -N "%%" }
bind -T copy-mode-vi 2              command-prompt -N -I 2 -p (repeat) { send -N "%%" }
bind -T copy-mode-vi 3              command-prompt -N -I 3 -p (repeat) { send -N "%%" }
bind -T copy-mode-vi 4              command-prompt -N -I 4 -p (repeat) { send -N "%%" }
bind -T copy-mode-vi 5              command-prompt -N -I 5 -p (repeat) { send -N "%%" }
bind -T copy-mode-vi 6              command-prompt -N -I 6 -p (repeat) { send -N "%%" }
bind -T copy-mode-vi 7              command-prompt -N -I 7 -p (repeat) { send -N "%%" }
bind -T copy-mode-vi 8              command-prompt -N -I 8 -p (repeat) { send -N "%%" }
bind -T copy-mode-vi 9              command-prompt -N -I 9 -p (repeat) { send -N "%%" }








bind -T copy-mode-vi PPage          send -X halfpage-up
bind -T copy-mode-vi NPage          send -X halfpage-down
bind -T copy-mode-vi C-j            send -X copy-pipe-and-cancel
bind -T copy-mode-vi Enter          send -X copy-pipe-and-cancel
bind -T copy-mode-vi c-v            send -X rectangle-toggle
bind -T copy-mode-vi V              send -X select-line
  
bind -T copy-mode-vi C-[            send -X clear-selection
bind -T copy-mode-vi Space          send -X begin-selection

bind -T copy-mode-vi *              send -FX search-forward "#{copy_cursor_word}"
bind -T copy-mode-vi '#'            send -FX search-backward "#{copy_cursor_word}"

bind -T copy-mode-vi ?              command-prompt -T search -p "(search up)"   { send -X search-backward "%%" }
bind -T copy-mode-vi /              command-prompt -T search -p "(search down)" { send -X search-forward "%%" }

bind -T copy-mode-vi n              send -X search-again
bind -T copy-mode-vi N              send -X search-reverse

bind -T copy-mode-vi :              command-prompt -p "(goto line)" { send -X goto-line "%%" }
bind -T copy-mode-vi ';'            send -X jump-again
bind -T copy-mode-vi A              send -X append-selection-and-cancel
bind -T copy-mode-vi D              send -X copy-pipe-end-of-line-and-cancel
bind -T copy-mode-vi f              command-prompt -1 -p "(jump forward)" { send -X jump-forward "%%" }
bind -T copy-mode-vi F              command-prompt -1 -p "(jump backward)" { send -X jump-backward "%%" }
bind -T copy-mode-vi M              send -X middle-line
bind -T copy-mode-vi P              send -X toggle-position
bind -T copy-mode-vi x              send -X set-mark
bind -T copy-mode-vi C-o            send -X jump-to-mark
bind -T copy-mode-vi X              send -X jump-to-mark
bind -T copy-mode-vi ^              send -X back-to-indentation

bind -T copy-mode-vi r              send -X refresh-from-pane
bind -T copy-mode-vi BSpace         send -X cursor-left
bind -T copy-mode-vi Home           send -X start-of-line
bind -T copy-mode-vi End            send -X end-of-line

# Mouse Support
bind -T copy-mode-vi MouseDown1Pane         select-pane
bind -T copy-mode-vi MouseDrag1Pane         select-pane \; send -X begin-selection
bind -T copy-mode-vi MouseDragEnd1Pane      send -X copy-pipe-and-cancel
bind -T copy-mode-vi WheelUpPane            select-pane \; send -X -N 5 scroll-up
bind -T copy-mode-vi WheelDownPane          select-pane \; send -X -N 5 scroll-down
bind -T copy-mode-vi DoubleClick1Pane       select-pane \; send -X select-word \; run-shell -d 0.3 \; send -X copy-pipe-and-cancel
bind -T copy-mode-vi TripleClick1Pane       select-pane \; send -X select-line \; run-shell -d 0.3 \; send -X copy-pipe-and-cancel

